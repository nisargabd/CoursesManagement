<div class="register-container">

  <mat-card class="register-card">
    <h1 class="title">Create Your Account</h1>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

      <!-- Username -->
      <mat-form-field appearance="outline" class="full compact">
        <mat-label>Username</mat-label>
        <input matInput formControlName="username" maxlength="15" placeholder="e.g. john_doe">
        <mat-icon matSuffix class="icon user-icon">person</mat-icon>

        <!-- <mat-hint align="end">{{ registerForm.get('username')?.value?.length || 0 }}/15</mat-hint> -->

        <mat-error *ngIf="registerForm.get('username')?.touched && registerForm.get('username')?.hasError('required')">
          Username is required.
        </mat-error>
        <mat-error *ngIf="registerForm.get('username')?.hasError('minlength')">
          Minimum 3 characters required.
        </mat-error>
      </mat-form-field>

      <!-- Email -->
      <mat-form-field appearance="outline" class="full compact">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" maxlength="40" placeholder="e.g. example@email.com">
        <mat-icon matSuffix class="icon email-icon">mail</mat-icon>
        <!-- <mat-hint align="end">{{ registerForm.get('email')?.value?.length || 0 }}/40</mat-hint> -->

        <mat-error *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.hasError('email')">
          Invalid email format.
        </mat-error>
      </mat-form-field>

      <!-- Phone Row -->
      <div class="phone-row">

        <mat-form-field appearance="outline" class="code-field compact">
          <mat-label>Code</mat-label>
          <mat-select formControlName="countryCode">
            <mat-option value="+91">India (+91)</mat-option>
            <mat-option value="+1">USA (+1)</mat-option>
            <mat-option value="+44">UK (+44)</mat-option>
            <mat-option value="+971">UAE (+971)</mat-option>
            <mat-option value="+61">Australia (+61)</mat-option>
            <mat-option value="+81">Japan (+81)</mat-option>
            <mat-option value="+49">Germany (+49)</mat-option>
            <mat-option value="+33">France (+33)</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="phone-field compact">
          <mat-label>Phone</mat-label>
          <input matInput formControlName="phone" maxlength="12" placeholder="e.g. 9876543210">
          <mat-icon matSuffix class="icon phone-icon">phone</mat-icon>

          <mat-error *ngIf="registerForm.get('phone')?.touched && registerForm.get('phone')?.invalid">
            Phone must be 7â€“12 digits.
          </mat-error>
        </mat-form-field>

      </div>

      <!-- Password -->
 <mat-form-field appearance="outline" class="full compact password-wrapper">
        <mat-label>Password</mat-label>
        <input
          matInput
          [type]="hidePassword ? 'password' : 'text'"
          formControlName="password"
          maxlength="25"
          placeholder="Enter strong password">
        <button mat-icon-button matSuffix type="button" (click)="togglePasswordVisibility()" class="eye-btn">
          <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        <!-- <mat-hint align="end">{{ registerForm.get('password')?.value?.length || 0 }}/25</mat-hint> -->

        <div class="password-rules" *ngIf="registerForm.get('password')?.touched && registerForm.get('password')?.invalid">
          <p>Password must include:</p>
          <ul>
            <li>Uppercase & lowercase</li>
            <li>At least one number</li>
            <li>One special character</li>
            <li>Minimum 8 characters</li>
          </ul>
        </div>
      </mat-form-field>


      <!-- Role -->
      <mat-form-field appearance="outline" class="full compact">
        <mat-label>Role</mat-label>
        <mat-select formControlName="role">
          <mat-option value="ADMIN">Admin</mat-option>
          <mat-option value="USER">User</mat-option>
        </mat-select>

        <mat-error *ngIf="registerForm.get('role')?.touched && registerForm.get('role')?.invalid">
          Please select a role.
        </mat-error>
      </mat-form-field>

      <button mat-raised-button color="primary" class="full register-btn">
        Register
      </button>

    </form>

   <div class="login-text">
  <span>Already have an account?</span>
  <button mat-button class="redirect-btn" (click)="goToLogin()">Login</button>
</div>


  </mat-card>

</div>
